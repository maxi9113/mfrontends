{"ast":null,"code":"import _slicedToArray from\"/home/max-valeta/Documents/ALTO/react/container-mfs/mf-task/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/max-valeta/Documents/ALTO/react/container-mfs/mf-task/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import{produce}from\"immer\";export var TasksContext=React.createContext();var initialState={loading:false,error:false,tasks:[],stateOriginal:null,index:null};function reducer(state,action){console.log(action.type);var nextState={};if(action.type==\"UNDO\")nextState=_objectSpread({},state.previousState);else nextState=reducerImmer(state,action);state=nextState;return state;}var reducerImmer=produce(function(draft,action){switch(action.type){case'GET':draft.tasks=action.data;break;case'INDEX':draft.index=action.data;break;case'DELETE':draft.tasks.splice(action.data,1);break;case'ADD':draft.tasks.push(action.data);break;case'LOAD':draft.loading=action.data;break;case'ERROR':draft.error=action.data;break;case'UPDATE':draft.tasks[draft.index]=_objectSpread(_objectSpread({},draft.tasks[draft.index]),action.data);break;default:break;}});function Provider(_ref){var children=_ref.children;var _React$useReducer=React.useReducer(reducerImmer,initialState),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];var value={tasks:state.tasks,loading:state.loading,error:state.error,index:state.index,previousState:state.previousState,updateData:function updateData(data,type){dispatch({type:type,data:data});}};return/*#__PURE__*/React.createElement(TasksContext.Provider,{value:value},children);}export default Provider;","map":{"version":3,"sources":["/home/max-valeta/Documents/ALTO/react/container-mfs/mf-task/src/direflow-components/provider/index.js"],"names":["React","produce","TasksContext","createContext","initialState","loading","error","tasks","stateOriginal","index","reducer","state","action","console","log","type","nextState","previousState","reducerImmer","draft","data","splice","push","Provider","children","useReducer","dispatch","value","updateData"],"mappings":"mWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,OAAtB,CACA,MAAO,IAAMC,CAAAA,YAAY,CAAGF,KAAK,CAACG,aAAN,EAArB,CAEP,GAAMC,CAAAA,YAAY,CAAG,CACjBC,OAAO,CAAE,KADQ,CAEjBC,KAAK,CAAG,KAFS,CAGjBC,KAAK,CAAE,EAHU,CAIjBC,aAAa,CAAG,IAJC,CAKjBC,KAAK,CAAE,IALU,CAArB,CAQA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwBC,MAAxB,CAAgC,CAC5BC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,IAAnB,EACA,GAAIC,CAAAA,SAAS,CAAI,EAAjB,CACA,GAAGJ,MAAM,CAACG,IAAP,EAAe,MAAlB,CACIC,SAAS,kBAAOL,KAAK,CAACM,aAAb,CAAT,CADJ,IAGID,CAAAA,SAAS,CAAGE,YAAY,CAACP,KAAD,CAAOC,MAAP,CAAxB,CAEJD,KAAK,CAAGK,SAAR,CACA,MAAOL,CAAAA,KAAP,CACH,CAED,GAAMO,CAAAA,YAAY,CAAGjB,OAAO,CAAC,SAACkB,KAAD,CAAQP,MAAR,CAAmB,CAE5C,OAAQA,MAAM,CAACG,IAAf,EACI,IAAK,KAAL,CACII,KAAK,CAACZ,KAAN,CAAcK,MAAM,CAACQ,IAArB,CACF,MACF,IAAK,OAAL,CACID,KAAK,CAACV,KAAN,CAAcG,MAAM,CAACQ,IAArB,CACF,MACF,IAAK,QAAL,CACID,KAAK,CAACZ,KAAN,CAAYc,MAAZ,CAAmBT,MAAM,CAACQ,IAA1B,CAA+B,CAA/B,EACF,MACF,IAAK,KAAL,CACID,KAAK,CAACZ,KAAN,CAAYe,IAAZ,CAAiBV,MAAM,CAACQ,IAAxB,EACF,MACF,IAAK,MAAL,CACID,KAAK,CAACd,OAAN,CAAgBO,MAAM,CAACQ,IAAvB,CACF,MACF,IAAK,OAAL,CACID,KAAK,CAACb,KAAN,CAAcM,MAAM,CAACQ,IAArB,CACF,MACF,IAAK,QAAL,CACID,KAAK,CAACZ,KAAN,CAAYY,KAAK,CAACV,KAAlB,iCACOU,KAAK,CAACZ,KAAN,CAAYY,KAAK,CAACV,KAAlB,CADP,EAEOG,MAAM,CAACQ,IAFd,EAIF,MACF,QACI,MA1BR,CA8BH,CAhC2B,CAA5B,CAkCA,QAASG,CAAAA,QAAT,MAAgC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,uBACFxB,KAAK,CAACyB,UAAN,CAAiBP,YAAjB,CAA+Bd,YAA/B,CADE,wDACrBO,KADqB,uBACde,QADc,uBAE5B,GAAMC,CAAAA,KAAK,CAAG,CACVpB,KAAK,CAAGI,KAAK,CAACJ,KADJ,CAEVF,OAAO,CAAGM,KAAK,CAACN,OAFN,CAGVC,KAAK,CAAEK,KAAK,CAACL,KAHH,CAIVG,KAAK,CAAGE,KAAK,CAACF,KAJJ,CAKVQ,aAAa,CAAGN,KAAK,CAACM,aALZ,CAMVW,UAAU,CAAE,oBAACR,IAAD,CAAML,IAAN,CAAe,CACvBW,QAAQ,CAAC,CAAEX,IAAI,CAAEA,IAAR,CAAcK,IAAI,CAAJA,IAAd,CAAD,CAAR,CACH,CARS,CAAd,CAWA,mBACA,oBAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAGO,KAA/B,EACKH,QADL,CADA,CAMH,CACD,cAAeD,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport {produce} from \"immer\"\nexport const TasksContext = React.createContext();\n\nconst initialState = {\n    loading: false,\n    error : false,   \n    tasks: [],\n    stateOriginal : null,\n    index: null\n};\n\nfunction reducer(state, action) { \n    console.log(action.type)\n    let nextState =  {} ;\n    if(action.type == \"UNDO\")\n        nextState = {...state.previousState}  \n    else \n        nextState = reducerImmer(state,action);     \n\n    state = nextState;\n    return state; \n}\n\nconst reducerImmer = produce((draft, action) => {\n    \n    switch (action.type) {\n        case 'GET':            \n            draft.tasks = action.data;\n          break;\n        case 'INDEX':\n            draft.index = action.data;\n          break;\n        case 'DELETE':\n            draft.tasks.splice(action.data,1);\n          break;\n        case 'ADD':\n            draft.tasks.push(action.data);\n          break;\n        case 'LOAD':\n            draft.loading = action.data;\n          break;\n        case 'ERROR':\n            draft.error = action.data;\n          break;\n        case 'UPDATE':\n            draft.tasks[draft.index] = {\n                ...draft.tasks[draft.index],\n                ...action.data            \n            };            \n          break;\n        default:\n            break;\n    }\n  \n \n});\n\nfunction Provider({ children }) {\n    const [state, dispatch] = React.useReducer(reducerImmer, initialState);\n    const value = {\n        tasks : state.tasks,\n        loading : state.loading,\n        error: state.error,\n        index : state.index,\n        previousState : state.previousState,\n        updateData: (data,type) => {\n            dispatch({ type: type, data });\n        }\n    };\n\n    return ( \n    <TasksContext.Provider value ={value}> \n        {children} \n    </TasksContext.Provider>\n    );\n\n}\nexport default Provider"]},"metadata":{},"sourceType":"module"}